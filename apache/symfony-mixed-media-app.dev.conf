<VirtualHost *:80>
    ServerName example.com
    DocumentRoot /var/www/html

    # Mount Symfony under /smma
    Alias /smma /var/www/html/dev2/symfony_mixed_media_app/public

    <Directory /var/www/html/dev2/symfony_mixed_media_app/public>
        Options +FollowSymLinks
        AllowOverride None
        Require all granted
        DirectoryIndex index.php

        RewriteEngine On
        RewriteBase /smma

        # let real files (css/js/img) pass through
        RewriteCond %{REQUEST_FILENAME} -f [OR]
        RewriteCond %{REQUEST_FILENAME} -d
        RewriteRule ^ - [L]

        # everything else â†’ front controller
        RewriteRule ^ index.php [L]
    </Directory>

    <IfModule mod_xsendfile.c>
        XSendFile On
        XSendFilePath "/var/www/html/dev2/symfony_mixed_media_app/media"
    </IfModule>

    <FilesMatch \.php$>
        SetHandler proxy:unix:/var/run/php/php8.3-fpm.sock|fcgi://dummy
    </FilesMatch>

    ErrorLog /var/log/apache2/smma_dev_error.log
    CustomLog /var/log/apache2/smma_dev_access.log combined
</VirtualHost>
